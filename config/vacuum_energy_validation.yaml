---
test_name: "vacuum_energy"
description: "Phase 3 Test 3.2: Vacuum Energy Density Scaling - ρ(R) ∝ R^n"

# Grid configuration with physical domain size
grid:
  size_x: 64
  size_y: 64
  L_domain: 100.0  # Domain size: 100 Planck lengths
  grid_sizes: [32, 64, 128]  # Grid convergence test

# Physics parameters (Planck units: ℏ = c = G = 1, Δ = 1)
physics:
  delta: 1.0                # Mass gap = Planck mass
  coupling: 0.1             # Kuramoto-Dirac coupling strength
  dt: 0.01                  # Timestep size
  total_steps: 5000         # 50 time units (equilibrium measurement)
  K: 1.0                    # Kuramoto coupling strength
  damping: 0.1              # Phase damping coefficient

# Domain split initial conditions
initial_conditions:
  dirac:
    type: "gaussian"
    # Minimal Gaussian at domain center (test vacuum energy, not particle dynamics)
    x0_physical: 50.0
    y0_physical: 50.0
    sigma_physical: 1.0     # Small wavepacket
    amplitude: 0.1          # Weak amplitude (vacuum-dominated)

  kuramoto:
    # Domain split configuration
    phase_distribution: "domain_split"
    omega_distribution: "zero"

    # Domain split parameters
    domain_boundary_x: 50.0  # Split at x = 50 ℓ_P (domain center)
    R_left: 1.0              # Left domain: fully synchronized
    R_right_scan: [0.0, 0.2, 0.4, 0.6, 0.8, 1.0]  # Scan R_right values
    transition_width: 2.0    # Smooth transition width (2 ℓ_P)

# Operator splitting configuration
operator_splitting:
  enabled: true
  substep_ratios: [1, 10]  # Quick validation (N=1, N=10)

# Validation tolerances
validation:
  norm_tolerance: 5.0e-3        # ||Ψ||² - 1 < 0.5% (relaxed from 0.1% - too strict)
  energy_tolerance: 1.0e-2      # |ΔE/E₀| < 1%
  convergence_tolerance: 0.05   # 5% convergence

# Output configuration
output:
  directory: "output/vacuum_energy"
  save_every: 50                 # Save observables every 50 steps
  formats: ["csv"]
  save_spatial_snapshots: false  # No spatial snapshots needed

# Test 3.2 specific analysis
analysis:
  mode: "vacuum_energy"
  measure_energy_by_region: true   # Compute ρ_left, ρ_right, ⟨R⟩_left, ⟨R⟩_right
  fit_power_law: true              # Fit ρ(R) = A·R^n
  expected_exponent: 2.0           # Theoretical expectation: n ≈ 2
  exponent_tolerance: 0.2          # Accept n ∈ [1.8, 2.2]
