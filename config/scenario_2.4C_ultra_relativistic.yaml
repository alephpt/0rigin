---
test_name: "scenario_2.4C_ultra_relativistic"
description: "Phase 2 Scenario 2.4C: Ultra-relativistic regime with ultra-fine grid. Tests v=[0.7, 0.8, 0.9]c on 512×512 grid to rule out grid resolution issues and probe fundamental SMFT limitations at v→c."

# Grid configuration - 512×512 ultra-fine grid
grid:
  size_x: 512
  size_y: 512
  L_domain: 100.0  # Domain size: 100 Planck lengths (Δx = 0.195 ℓ_P)
  grid_sizes: []    # Single ultra-fine grid

# Physics parameters (Planck units: ℏ = c = 1, Δ = 1)
physics:
  delta: 1.0                # Mass gap = Planck mass
  coupling: 0.1             # Kuramoto-Dirac coupling strength
  dt: 0.005                 # Reduced timestep for stability (CFL condition)
  total_steps: 10000        # 50 time units (dt reduced by 2×)
  K: 1.0                    # Kuramoto coupling strength
  damping: 0.1              # Phase damping coefficient

# GRID-INDEPENDENT initial conditions (all in Planck lengths)
initial_conditions:
  dirac:
    type: "boosted_gaussian"
    # Physical parameters (grid-independent)
    x0_physical: 50.0          # Start at domain center
    y0_physical: 50.0
    sigma_physical: 3.0        # Width: 3 Planck lengths (now 15 grid points!)
    amplitude: 1.0
    # Ultra-relativistic velocities
    boost_velocities: [0.70, 0.80, 0.90]
    # Expected γ factors:
    # v = 0.70c → γ = 1.400 (+40.0% mass increase)
    # v = 0.80c → γ = 1.667 (+66.7% mass increase) [NEW]
    # v = 0.90c → γ = 2.294 (+129.4% mass increase) [NEW - ultra-relativistic]

  kuramoto:
    phase_distribution: "vortex"     # CRITICAL: Use "vortex" not "uniform"!
    winding_number: 1                # Topological charge W = +1
    vortex_core_radius: 3.0          # Core radius in Planck lengths
    vortex_center_x: 50.0            # Vortex at domain center (256 ℓ_P domain)
    vortex_center_y: 50.0
    omega_distribution: "zero"       # Zero natural frequencies

# Operator splitting configuration - use validated N=10
operator_splitting:
  enabled: true
  substep_ratios: [10]  # Use optimal N=10 only (validated in 2.3)

# Validation configuration with 6-criteria checks (relaxed for ultra-relativistic)
validation:
  # Global validation (always enforced)
  norm_tolerance: 0.01          # ||Ψ||² - 1 < 1% (relaxed for v→c)
  energy_tolerance: 0.02        # |ΔE/E₀| < 2% (relaxed for v→c)
  convergence_tolerance: 0.05   # 5% convergence between N values
  enforce_R_bounds: true        # Check 0 ≤ R ≤ 1
  enforce_causality: true       # Check v ≤ c
  check_numerical_stability: true

  # Scenario-specific: Phase 2.4C Ultra-Relativistic
  scenario: "relativistic_mass"

  # 6-Criteria Validation Flags (relaxed tolerances for v→c exploration)
  require_vortex: true            # Criterion 1&2: W = ±1
  winding_tolerance: 0.2          # |W - 1| < 0.2
  require_core: true              # Criterion 3: R_min < 0.5
  core_R_threshold: 0.5           # R-field core threshold
  require_boost: true             # Criterion 5: p(t=0) = γmv
  initial_momentum_tolerance: 0.10  # 10% error in initial momentum (relaxed)
  validate_gamma_factor: true     # Criterion 6: γ_measured vs theory
  gamma_tolerance: 0.10           # 10% error in gamma factor (relaxed for exploration)

  # Validation timing
  validate_initial_state: true
  validate_final_state: true
  fail_on_critical: false         # Don't abort - collect all results
  verbose: true

# Output configuration
output:
  directory: "output/scenario_2.4C_ultra_relativistic"
  save_every: 20                  # Save observables every 20 steps (512² is large!)
  formats: ["csv"]
  save_spatial_snapshots: true
  snapshot_steps: [0, 2500, 5000, 7500, 9999]  # 5 snapshots only (512² = 262k points each)

# Scenario 2.4C specific analysis
analysis:
  track_trajectory: true          # Track center-of-mass position over time
  measure_velocity: true          # Measure <v> = d<r>/dt
  compute_effective_mass: true    # Extract m_eff from E-p relation
  test_gamma_factor: true         # Test m_eff / m_rest = γ(v)
  compute_energy: true            # E² = (mc²)² + (pc)²
  lorentz_invariants: true        # Check E² - p² = m₀²c⁴

  # Ultra-relativistic specific
  test_grid_resolution_limit: true      # Is 512×512 sufficient at v→c?
  measure_lorentz_contraction: true     # Does σ_∥ contract as σ/γ?
  compute_time_dilation: true           # Does particle evolution slow as 1/γ?
  test_energy_momentum_relation: true   # E² = (mc²)² + (pc)² at v→c
  measure_dispersion_effects: true      # Wavepacket spreading at high v

  # Fundamental limits
  test_c_limit: true                    # Does physics break down at v→c?
  compare_klein_gordon: false           # (Future: implement KG for comparison)
  measure_vacuum_polarization: false    # (Future: quantum corrections)
