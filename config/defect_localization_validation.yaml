---
test_name: "defect_localization"
description: "Phase 2 Scenario 2.1: Test particle binding/scattering at synchronization defect (vortex core) - GRID-INDEPENDENT"

# Grid configuration with physical domain size
grid:
  size_x: 128  # Default grid size (used if grid_sizes is empty)
  size_y: 128
  L_domain: 100.0  # Domain size: 100 Planck lengths
  grid_sizes: [16, 32, 64]  # Grid convergence test: run all grid sizes

# Physics parameters (Planck units: ℏ = c = G = 1, Δ = 1)
physics:
  delta: 1.0                # Mass gap = Planck mass
  coupling: 0.1             # Kuramoto-Dirac coupling strength
  dt: 0.01                  # Timestep size
  total_steps: 10000        # 100 time units (match Phase 1 standard)
  K: 1.0                    # Kuramoto coupling strength
  damping: 0.1              # Phase damping coefficient

# GRID-INDEPENDENT initial conditions (all in Planck lengths)
initial_conditions:
  dirac:
    type: "gaussian"
    # Physical parameters (grid-independent)
    x0_physical: 60.0       # 10 ℓ_P from vortex center (50, 50)
    y0_physical: 50.0       # Start particle at radius r=10 from defect
    sigma_physical: 3.0     # Width: 3 Planck lengths
    amplitude: 1.0          # Initial amplitude

  kuramoto:
    phase_distribution: "vortex"     # Vortex phase defect at center
    omega_distribution: "zero"       # Zero natural frequencies
    # Vortex configuration (grid-independent)
    winding_number: 1                # Topological charge +1
    vortex_core_radius: 3.0          # Core radius: 3 Planck lengths
    vortex_center_x: 50.0            # Center at domain center
    vortex_center_y: 50.0

# Operator splitting configuration
operator_splitting:
  enabled: true
  substep_ratios: [1, 10, 100]  # Test N-dependence of defect interaction

# Validation tolerances
validation:
  norm_tolerance: 1.0e-4        # ||Ψ||² - 1 < 10⁻⁴
  energy_tolerance: 1.0e-2      # |ΔE/E₀| < 1%
  convergence_tolerance: 0.05   # 5% convergence between N values

# Output configuration
output:
  directory: "output/defect_localization"
  save_every: 10                  # Save observables every 10 steps
  formats: ["csv"]                # Output formats
  save_spatial_snapshots: true    # Save full spatial fields (theta, R) for topological charge computation
  # snapshot_steps: []            # Empty = auto-generate at t=0,25,50,75,100 time units

# Scenario 2.1 specific analysis
analysis:
  track_trajectory: true          # Track center-of-mass position over time
  measure_radial_distance: true   # Distance from vortex core
  compute_binding_energy: true    # E = E_kin + E_pot (E<0 → binding, E>0 → scattering)
  force_analysis: true            # Measure F = -⟨β⟩Δ∇R
