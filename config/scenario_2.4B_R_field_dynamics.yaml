---
test_name: "scenario_2.4B_R_field_dynamics"
description: "Phase 2 Scenario 2.4B: R-field dynamics study to understand N=1 'mass freeze' phenomenon. Compares spatial R(x,y,t) evolution for N=1 vs N=10 at v=0.5c and v=0.7c. Tests hypothesis: N=1 freezes R-field, preventing mass modulation."

# Grid configuration - use 128×128 for detailed spatial dynamics
grid:
  size_x: 128
  size_y: 128
  L_domain: 100.0  # Domain size: 100 Planck lengths
  grid_sizes: []    # Single grid for R-field spatial study

# Physics parameters (Planck units: ℏ = c = 1, Δ = 1)
physics:
  delta: 1.0                # Mass gap = Planck mass
  coupling: 0.1             # Kuramoto-Dirac coupling strength
  dt: 0.01                  # Timestep size
  total_steps: 5000         # 50 time units (shorter for detailed snapshots)
  K: 1.0                    # Kuramoto coupling strength
  damping: 0.1              # Phase damping coefficient

# GRID-INDEPENDENT initial conditions (all in Planck lengths)
initial_conditions:
  dirac:
    type: "boosted_gaussian"
    # Physical parameters (grid-independent)
    x0_physical: 50.0          # Start at domain center
    y0_physical: 50.0
    sigma_physical: 3.0        # Width: 3 Planck lengths
    amplitude: 1.0
    # Test two velocities: breakdown onset (v=0.5c) and clear failure (v=0.7c)
    boost_velocities: [0.5, 0.7]
    # v = 0.5c: 13.4% error at N=1, 4.1% at N=10 (Scenario 2.3 results)
    # v = 0.7c: 28.6% error at N=1, 8.8% at N=10 (Scenario 2.3 results)

  kuramoto:
    phase_distribution: "vortex"     # CRITICAL: Use "vortex" not "uniform"!
    winding_number: 1                # Topological charge W = +1
    vortex_core_radius: 3.0          # Core radius in Planck lengths
    vortex_center_x: 50.0            # Vortex at domain center
    vortex_center_y: 50.0
    omega_distribution: "zero"       # Zero natural frequencies

# Operator splitting configuration - compare N=1 vs N=10
operator_splitting:
  enabled: true
  substep_ratios: [1, 10]  # Direct comparison: frozen (N=1) vs dynamic (N=10)

# Validation configuration with 6-criteria checks
validation:
  # Global validation (always enforced)
  norm_tolerance: 0.005         # ||Ψ||² - 1 < 0.5%
  energy_tolerance: 0.01        # |ΔE/E₀| < 1%
  convergence_tolerance: 0.05   # 5% convergence between N values
  enforce_R_bounds: true        # Check 0 ≤ R ≤ 1
  enforce_causality: true       # Check v ≤ c
  check_numerical_stability: true

  # Scenario-specific: Phase 2.4B R-Field Dynamics
  scenario: "relativistic_mass"

  # 6-Criteria Validation Flags
  require_vortex: true            # Criterion 1&2: W = ±1
  winding_tolerance: 0.2          # |W - 1| < 0.2
  require_core: true              # Criterion 3: R_min < 0.5
  core_R_threshold: 0.5           # R-field core threshold
  require_boost: true             # Criterion 5: p(t=0) = γmv
  initial_momentum_tolerance: 0.05  # 5% error in initial momentum
  validate_gamma_factor: true     # Criterion 6: γ_measured vs theory
  gamma_tolerance: 0.05           # 5% error in gamma factor

  # Validation timing
  validate_initial_state: true
  validate_final_state: true
  fail_on_critical: false         # Don't abort - collect all results
  verbose: true

# Output configuration - CRITICAL: Save full spatial R-field
output:
  directory: "output/scenario_2.4B_R_field_dynamics"
  save_every: 10                  # Save observables every 10 steps
  formats: ["csv"]
  save_spatial_snapshots: true    # SAVE FULL R(x,y,t) AND θ(x,y,t)
  snapshot_steps: [0, 100, 250, 500, 1000, 2000, 3000, 4000, 4999]  # 9 snapshots

# Scenario 2.4B specific analysis
analysis:
  track_trajectory: true          # Track center-of-mass position over time
  measure_velocity: true          # Measure <v> = d<r>/dt
  compute_effective_mass: true    # Extract m_eff from E-p relation
  test_gamma_factor: true         # Test m_eff / m_rest = γ(v)
  compute_energy: true            # E² = (mc²)² + (pc)²
  lorentz_invariants: true        # Check E² - p² = m₀²c⁴

  # NEW: R-field dynamics analysis
  measure_R_field_evolution: true       # Track R(x,y,t) in particle vicinity
  compute_R_gradient: true              # ∇R(x,y,t) along particle trajectory
  measure_R_local_vs_global: true       # Compare R(particle position) vs R_avg
  compute_R_timescale: true             # τ_R = characteristic R response time
  compare_N1_vs_N10_R_dynamics: true    # Direct N=1 vs N=10 comparison

  # Hypothesis testing
  test_R_freeze_hypothesis: true        # Does N=1 freeze R-field?
  measure_spinor_R_coupling: true       # σ(x,y,t) = |Ψ(x,y,t)|² coupling to R
  compute_feedback_strength: true       # β = d(ln R)/d(ln σ) feedback coefficient
