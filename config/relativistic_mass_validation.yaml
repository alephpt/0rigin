---
test_name: "relativistic_mass"
description: "Phase 2 Scenario 2.3: Test relativistic mass formula m(v) = γ·Δ·R where γ = 1/√(1-v²/c²)"

# Grid configuration with physical domain size
grid:
  size_x: 128  # Default grid size (used if grid_sizes is empty)
  size_y: 128
  L_domain: 100.0  # Domain size: 100 Planck lengths
  grid_sizes: [32, 64, 128]  # Grid convergence test

# Physics parameters (Planck units: ℏ = c = 1, Δ = 1)
physics:
  delta: 1.0                # Mass gap = Planck mass
  coupling: 0.1             # Kuramoto-Dirac coupling strength
  dt: 0.01                  # Timestep size
  total_steps: 10000        # 100 time units
  K: 1.0                    # Kuramoto coupling strength
  damping: 0.1              # Phase damping coefficient

# GRID-INDEPENDENT initial conditions (all in Planck lengths)
initial_conditions:
  dirac:
    type: "boosted_gaussian"   # New: Gaussian with momentum boost
    # Physical parameters (grid-independent)
    x0_physical: 50.0          # Start at domain center
    y0_physical: 50.0
    sigma_physical: 3.0        # Width: 3 Planck lengths
    amplitude: 1.0
    # Momentum boost parameters (c = 1 in Planck units)
    boost_velocities: [0.0, 0.3, 0.5, 0.7]  # Test v = 0, 0.3c, 0.5c, 0.7c
    # Expected γ factors:
    # v = 0.0  → γ = 1.000
    # v = 0.3c → γ = 1.048 (+4.8% mass increase)
    # v = 0.5c → γ = 1.155 (+15.5% mass increase)
    # v = 0.7c → γ = 1.400 (+40.0% mass increase)

  kuramoto:
    phase_distribution: "uniform"    # Uniform background (no defects)
    omega_distribution: "zero"       # Zero natural frequencies
    uniform_phase: 0.0               # Constant phase = 0
    R_background: 0.8                # Moderate synchronization

# Operator splitting configuration
operator_splitting:
  enabled: true
  substep_ratios: [1, 10, 100]  # Test N-dependence

# Validation tolerances
validation:
  norm_tolerance: 1.0e-4        # ||Ψ||² - 1 < 10⁻⁴
  energy_tolerance: 1.0e-2      # |ΔE/E₀| < 1%
  convergence_tolerance: 0.05   # 5% convergence between N values
  # Relativistic mass validation
  gamma_tolerance: 0.05         # 5% error in γ factor measurement

# Output configuration
output:
  directory: "output/relativistic_mass"
  save_every: 10                  # Save observables every 10 steps
  formats: ["csv"]
  save_spatial_snapshots: true
  # snapshot_steps: []            # Auto-generate snapshots

# Scenario 2.3 specific analysis
analysis:
  track_trajectory: true          # Track center-of-mass position over time
  measure_velocity: true          # Measure <v> = d<r>/dt
  compute_effective_mass: true    # Extract m_eff from trajectory curvature
  test_gamma_factor: true         # Test m_eff / m_rest = γ(v)
  compute_energy: true            # E² = (mc²)² + (pc)² in Planck units
  lorentz_invariants: true        # Check E² - p² = m₀²c⁴
