test_name: "lorentz_force_vortex_em"

# SCENARIO B: Vortex EM field (contains both E and B)
# Expected: E-field does work, |v| can change

simulation:
  use_gpu: false
  total_steps: 20000
  dt: 0.0005
  N_values: [1]

grid:
  size_x: 64
  size_y: 64
  L_domain: 100.0
  boundary_conditions: "periodic"

physics:
  hbar: 1.0
  mass: 0.1
  coupling_strength: 1.0
  damping: 0.0

initial_conditions:
  dirac:
    type: "gaussian"
    x0_physical: 60.0
    y0_physical: 50.0
    sigma_physical: 3.0
    k_physical: 0.0
    k_y_physical: 0.0
    amplitude: 1.0

  kuramoto:
    phase_distribution: "vortex"
    vortex_winding: 1
    vortex_center_x: 50.0
    vortex_center_y: 50.0
    vortex_core_radius: 5.0
    R_background: 0.8

em_coupling:
  enabled: true
  regularization: "R2_FACTOR"

# VORTEX EM FIELD TEST
test_particle:
  enabled: true
  x0: 55.0
  y0: 50.0
  vx0: 0.0
  vy0: 0.01
  charge: -1.0
  mass: 0.1
  record_every: 1

  # Use EM fields from vortex (E + B)
  use_uniform_B: false

validation:
  norm_tolerance: 0.01
  energy_tolerance: 0.01

output:
  save_every: 100
  save_spatial_snapshots: true
  formats: ["csv"]

# EXPECTED: E-field present, |v| will change due to electric work
