---
test_name: "em_coupling_disabled_regression"
description: "Phase 6.1: Regression test - verify that when EM coupling is disabled, behavior matches Phase 2.3 (relativistic mass) baseline. Critical test to ensure EM integration does not break existing physics when disabled."

# Grid configuration with physical domain size
grid:
  size_x: 64
  size_y: 64
  L_domain: 100.0  # Domain size: 100 Planck lengths
  grid_sizes: []   # Single grid test (regression baseline)

# Physics parameters (Planck units: ℏ = c = 1, Δ = 1)
# IDENTICAL to Phase 2.3 relativistic_mass_validation.yaml
physics:
  delta: 1.0                # Mass gap = Planck mass
  coupling: 0.1             # Kuramoto-Dirac coupling strength
  dt: 0.01                  # Timestep size
  total_steps: 2000         # 20 time units
  K: 1.0                    # Kuramoto coupling strength
  damping: 0.1              # Phase damping coefficient

# GRID-INDEPENDENT initial conditions (all in Planck lengths)
initial_conditions:
  dirac:
    type: "boosted_gaussian"
    x0_physical: 60.0       # 10 ℓ_P offset from domain center
    y0_physical: 50.0
    sigma_physical: 3.0     # Width: 3 Planck lengths
    amplitude: 1.0
    # Test boosted states - same as Phase 2.3
    boost_velocities: [0.0, 0.3, 0.5]  # v = 0, 0.3c, 0.5c
    # Expected γ factors:
    # v = 0.0  → γ = 1.000
    # v = 0.3c → γ = 1.048 (+4.8% mass increase)
    # v = 0.5c → γ = 1.155 (+15.5% mass increase)

  kuramoto:
    phase_distribution: "vortex"    # Vortex phase defect
    omega_distribution: "zero"      # Zero natural frequencies
    winding_number: 1               # Topological charge +1
    vortex_core_radius: 3.0         # Core radius: 3 Planck lengths
    vortex_center_x: 50.0           # Center at domain center
    vortex_center_y: 50.0
    R_background: 0.8               # Moderate synchronization

# Electromagnetic coupling - EXPLICITLY DISABLED for regression test
em_coupling:
  enabled: false    # KEY: EM coupling OFF for regression baseline
  coupling_strength: 0.0    # Unused when disabled

# Operator splitting configuration
operator_splitting:
  enabled: true
  substep_ratios: [1, 10, 100]  # Test N-dependence

# Validation tolerances - IDENTICAL to Phase 2.3
validation:
  norm_tolerance: 0.005         # ||Ψ||² - 1 < 0.5%
  energy_tolerance: 0.01        # |ΔE/E₀| < 1%
  convergence_tolerance: 0.05   # 5% convergence between N values

  # Relativistic mass validation (Phase 2.3 criteria)
  check_relativistic_mass: true  # Core Phase 2.3 test
  gamma_tolerance: 0.05         # 5% error in γ factor measurement

# Output configuration
output:
  directory: "output/em_coupling_disabled_regression"
  save_every: 10                  # Save observables every 10 steps
  formats: ["csv"]
  save_spatial_snapshots: true

# Analysis configuration - IDENTICAL to Phase 2.3
analysis:
  track_trajectory: true          # Track center-of-mass position over time
  measure_velocity: true          # Measure <v> = d<r>/dt
  compute_effective_mass: true    # Extract m_eff from trajectory
  test_gamma_factor: true         # Test m_eff / m_rest = γ(v) - KEY METRIC
  compute_energy: true            # E² = (mc²)² + (pc)²
  lorentz_invariants: true        # Check E² - p² = m₀²

# IMPORTANT NOTES:
# ================
# This test serves as a REGRESSION BASELINE to ensure that:
# 1. Phase 6.1 EM integration doesn't break Phase 2.3 physics
# 2. Relativistic mass formula m(v) = γ·Δ·R still holds when EM disabled
# 3. All Phase 2.3 validation criteria pass identically
#
# EXPECTED RESULTS:
# - Identical to Phase 2.3 relativistic_mass_validation.yaml output
# - Gamma factors: γ = 1.000, 1.048, 1.155 for v = 0, 0.3c, 0.5c
# - PASS/FAIL should match Phase 2.3 exactly
#
# If results differ, EM integration has introduced a bug in the baseline physics!
