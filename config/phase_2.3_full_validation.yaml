test:
  name: "Phase 2.3 - Relativistic Mass Validation (Full Suite)"
  description: "Complete 6-criteria validation: 3 grids × 3 N-values × 4 velocities = 36 configurations"

# Grid configuration with physical domain size
grid:
  size_x: 128  # Default (will be overridden by grid_sizes)
  size_y: 128
  L_domain: 100.0  # Domain size: 100 Planck lengths (grid-independent)
  grid_sizes: [64, 128, 256]  # Grid convergence: 64×64, 128×128, 256×256

# Physics parameters (Planck units: ℏ = c = G = 1, Δ = m_Planck = 1)
physics:
  delta: 1.0                # Vacuum potential Δ = Planck mass
  coupling: 0.1             # Kuramoto-Dirac coupling strength
  dt: 0.01                  # Timestep
  total_steps: 5000         # 50 time units (reduced from 10k for faster validation)
  K: 1.0                    # Kuramoto coupling strength
  damping: 0.1              # Phase damping coefficient

# GRID-INDEPENDENT initial conditions (all in Planck lengths)
initial_conditions:
  dirac:
    type: "boosted_gaussian"
    # Physical parameters (grid-independent)
    x0_physical: 60.0        # Offset from vortex center (like minimal test)
    y0_physical: 50.0        # At domain center in y
    sigma_physical: 5.0      # Width: 5 Planck lengths
    amplitude: 1.0
    # Momentum boost parameters (c = 1 in Planck units)
    boost_velocities: [0.0, 0.3, 0.5, 0.7]  # Test v = 0, 0.3c, 0.5c, 0.7c
    # Expected γ factors:
    # v = 0.0  → γ = 1.000
    # v = 0.3c → γ = 1.048 (+4.8% mass increase)
    # v = 0.5c → γ = 1.155 (+15.5% mass increase)
    # v = 0.7c → γ = 1.400 (+40.0% mass increase)

  kuramoto:
    phase_distribution: "vortex"  # CRITICAL: Use "vortex" not "uniform"!
    winding_number: 1             # Topological charge W = +1
    vortex_core_radius: 3.0       # Core radius in Planck lengths
    vortex_center_x: 50.0         # Vortex at domain center
    vortex_center_y: 50.0
    omega_distribution: "zero"    # Zero natural frequencies

# Operator splitting configuration
operator_splitting:
  enabled: true
  substep_ratios: [1, 10, 100]  # Test N-dependence: N=1, N=10, N=100

# Validation configuration with 6-criteria checks
validation:
  # Global validation (always enforced)
  norm_tolerance: 0.005         # ||Ψ||² - 1 < 0.5%
  energy_tolerance: 0.02        # |ΔE/E₀| < 2% (relaxed for 5k steps)
  convergence_tolerance: 0.05   # 5% convergence between N values
  enforce_R_bounds: true        # Check 0 ≤ R ≤ 1
  enforce_causality: true       # Check v ≤ c
  check_numerical_stability: true

  # Scenario-specific: Phase 2.3 Relativistic Mass Validation
  scenario: "relativistic_mass"

  # 6-Criteria Validation Flags
  require_vortex: true            # Criterion 1&2: W = ±1
  winding_tolerance: 0.2          # |W - 1| < 0.2
  require_core: true              # Criterion 3: R_min < 0.5
  core_R_threshold: 0.5           # R-field core threshold
  require_boost: true             # Criterion 5: p(t=0) = γmv
  initial_momentum_tolerance: 0.05  # 5% error in initial momentum
  validate_gamma_factor: true     # Criterion 6: γ_measured vs theory
  gamma_tolerance: 0.05           # 5% error in gamma factor

  # Validation timing
  validate_initial_state: true
  validate_final_state: true
  fail_on_critical: false         # Don't abort - collect all results
  verbose: true

# Output configuration
output:
  directory: "output/phase_2.3_full_validation"
  save_every: 100                   # Save observables every 100 steps
  formats: ["csv"]
  auto_visualize: false
  save_spatial_snapshots: true
  snapshot_steps: [0, 2500, 4999]   # t=0, mid, final

# Analysis (for post-processing)
analysis:
  track_trajectory: true          # Track center-of-mass position
  measure_velocity: true          # Measure <v> = d<r>/dt
  compute_effective_mass: true    # Extract m_eff from E²-p²
  test_gamma_factor: true         # Test m_eff / m_rest = γ(v)
  compute_energy: true            # E² = (mc²)² + (pc)²
  lorentz_invariants: true        # Check E² - p² = m₀²c⁴
