---
test_name: "casimir_force"
description: "Phase 3 Test 3.1: Casimir-like Force Between Defect Sheets - F(d) ∝ d^(-2)"

# Grid configuration with physical domain size
grid:
  size_x: 128
  size_y: 128
  L_domain: 100.0  # Domain size: 100 Planck lengths
  grid_sizes: [64, 128, 256]  # Grid convergence test

# Physics parameters (Planck units: ℏ = c = G = 1, Δ = 1)
physics:
  delta: 1.0                # Mass gap = Planck mass
  coupling: 0.1             # Kuramoto-Dirac coupling strength
  dt: 0.01                  # Timestep size
  total_steps: 5000         # 50 time units (equilibrium force measurement)
  K: 1.0                    # Kuramoto coupling strength
  damping: 0.1              # Phase damping coefficient

# Linear defect initial conditions
initial_conditions:
  dirac:
    type: "gaussian"
    # Minimal Gaussian away from defects (test vacuum structure, not particle)
    x0_physical: 25.0
    y0_physical: 50.0
    sigma_physical: 1.0     # Small wavepacket
    amplitude: 0.1          # Weak amplitude

  kuramoto:
    # Linear defect configuration
    phase_distribution: "linear_defects"
    omega_distribution: "zero"

    # Parallel defect sheets configuration
    defect_separation_scan: [5, 10, 15, 20, 25, 30]  # Scan separations [ℓ_P]
    defect_x1: 40.0         # First defect at x = 40 ℓ_P
    # defect_x2 = defect_x1 + separation (computed automatically)
    R_min: 0.0              # Desynchronized at defect core
    R_max: 1.0              # Synchronized in background
    defect_width: 3.0       # Defect width: 3 Planck lengths

# Operator splitting configuration
operator_splitting:
  enabled: true
  substep_ratios: [1, 10]  # Quick validation

# Validation tolerances
validation:
  norm_tolerance: 1.0e-3        # ||Ψ||² - 1 < 0.1%
  energy_tolerance: 1.0e-2      # |ΔE/E₀| < 1%
  convergence_tolerance: 0.05   # 5% convergence

# Output configuration
output:
  directory: "output/casimir_force"
  save_every: 50                 # Save observables every 50 steps
  formats: ["csv"]
  save_spatial_snapshots: true   # Save R-field snapshots for defect visualization
  snapshot_steps: [0, 2500, 4999]  # t = 0, 25, 50 time units

# Test 3.1 specific analysis
analysis:
  mode: "casimir_force"
  measure_defect_force: true       # Compute force between defect sheets
  fit_power_law: true              # Fit F(d) = A·d^α
  expected_exponent: -2.0          # Theoretical: inverse square law α ≈ -2
  exponent_tolerance: 0.3          # Accept α ∈ [-2.3, -1.7]
  force_tolerance: 0.1             # Relative force measurement precision (10%)
