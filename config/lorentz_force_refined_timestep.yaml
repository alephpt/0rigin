test_name: "lorentz_force_refined_timestep"

# HIGH PRECISION TEST: 5× smaller timestep for <1% accuracy target
# dt = 0.0001 (vs 0.0005), total_steps = 100000 for same 10 t_P duration
# Expected improvement: O(dt²) error reduction → ~25× better accuracy

grid:
  size_x: 64
  size_y: 64
  L_domain: 100.0
  boundary_conditions: "periodic"

physics:
  hbar: 1.0
  mass: 0.1
  coupling_strength: 0.0
  damping: 0.0
  total_steps: 100000   # 5× more steps
  dt: 0.0001           # 5× smaller timestep
  em_coupling_enabled: true

initial_conditions:
  dirac:
    type: "gaussian"
    x0_physical: 50.0
    y0_physical: 50.0
    sigma_physical: 3.0
    k_physical: 0.0
    k_y_physical: 0.0
    amplitude: 0.01   # Minimal coupling

  kuramoto:
    phase_distribution: "uniform"
    uniform_phase: 0.0
    R_background: 0.0

  test_particle:
    enabled: true
    x0: 55.0
    y0: 50.0
    vx0: 0.0
    vy0: 0.01      # 1% speed of light
    charge: -1.0
    mass: 0.1
    record_every: 5  # Record every 5 steps (still 20000 data points)
    use_uniform_B: true
    uniform_B_z: 0.1

em_coupling:
  enabled: true
  regularization: "NONE"

validation:
  norm_tolerance: 0.01
  energy_tolerance: 0.01

output:
  save_every: 5  # Match particle recording
  save_spatial_snapshots: false
  formats: ["csv"]

# EXPECTED WITH REFINED TIMESTEP:
# - Frequency error: <0.7% (from 3.45%)
# - Radius error: <0.5% (from 2.69%)
# - |v| conservation: <10^-12 (from 10^-10)
# Total duration: 100000 * 0.0001 = 10.0 t_P (same as original)
# Larmor radius: r = mv/(qB) = 0.1 * 0.01 / (1.0 * 0.1) = 0.01 ℓ_P
# Period: T = 2πm/(qB) = 6.283 t_P
# Orbits: 10.0 / 6.283 = 1.59 orbits